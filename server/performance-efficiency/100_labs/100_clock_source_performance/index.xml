<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Level 100: Calculating differences in clock source on AWS Well-Architected Labs</title><link>https://wellarchitectedlabs.com/performance-efficiency/100_labs/100_clock_source_performance/</link><description>Recent content in Level 100: Calculating differences in clock source on AWS Well-Architected Labs</description><generator>Hugo -- gohugo.io</generator><lastBuildDate>Tue, 09 Jun 2020 12:00:00 -0400</lastBuildDate><atom:link href="https://wellarchitectedlabs.com/performance-efficiency/100_labs/100_clock_source_performance/index.xml" rel="self" type="application/rss+xml"/><item><title>Deploying the infrastructure</title><link>https://wellarchitectedlabs.com/performance-efficiency/100_labs/100_clock_source_performance/1_deploy/</link><pubDate>Tue, 09 Jun 2020 12:00:00 -0400</pubDate><guid>https://wellarchitectedlabs.com/performance-efficiency/100_labs/100_clock_source_performance/1_deploy/</guid><description>The CloudFormation template that accompanies this lab requires the ability to create IAM Roles and IAM Instance Profiles. If the account you are using does not have these capabilities, you will not be able to complete this lab.
Download the time_test.yaml CloudFormation template to your machine. This lab assumes you will be deploying to the default VPC within your AWS account. If you wish to deploy to a different VPC, just select the subnet that corresponds to your VPC.</description></item><item><title>Testing Performance of both nodes before clock changes</title><link>https://wellarchitectedlabs.com/performance-efficiency/100_labs/100_clock_source_performance/2_testing_before/</link><pubDate>Tue, 09 Jun 2020 12:00:00 -0400</pubDate><guid>https://wellarchitectedlabs.com/performance-efficiency/100_labs/100_clock_source_performance/2_testing_before/</guid><description>Now that we have two EC2 machines, one Xen based EC2 and one Nitro/KVM based EC2, we can run a simple test to see the speed in which is can return time of day. This test program was installed on each machine under /tmp/time_test.py. The program will simply request the time of day from a local c-library one million times.
The time_test.py code #!/usr/bin/python3 import time _gettimeofday = None def gettimeofday(): import ctypes global _gettimeofday if not _gettimeofday: _gettimeofday = ctypes.</description></item><item><title>Changing clock type on the Xen based EC2 instance</title><link>https://wellarchitectedlabs.com/performance-efficiency/100_labs/100_clock_source_performance/3_change_clock/</link><pubDate>Tue, 09 Jun 2020 12:00:00 -0400</pubDate><guid>https://wellarchitectedlabs.com/performance-efficiency/100_labs/100_clock_source_performance/3_change_clock/</guid><description>We can change the clock type on Xen based EC2 instances to get better performance than the standard Xen clock source. You will notice that the speed for Xen and Nitro/KVM instances will be close to identical after this change.
Code to change the clock source echo &amp;#34;tsc&amp;#34; &amp;gt; /sys/devices/system/clocksource/clocksource0/current_clocksource This changes the default time clock from xen to tsc (Time Stamp Counter), which is considered the best practice for Xen based EC2 instances.</description></item><item><title>Teardown</title><link>https://wellarchitectedlabs.com/performance-efficiency/100_labs/100_clock_source_performance/4_cleanup/</link><pubDate>Tue, 09 Jun 2020 12:00:00 -0400</pubDate><guid>https://wellarchitectedlabs.com/performance-efficiency/100_labs/100_clock_source_performance/4_cleanup/</guid><description>In this lab, you created two different EC2 instances and tested gettime system calls to each on to test the performance for each clocksource type. You were able to set a new clocksource for a Xen based instance type and see a dramatic improvement in the time it takes for these kinds of system calls.
Remove all the resources via CloudFormation In order to remove the lab, go into the CloudFormation console, select the deployed template, click the drop down next to “Create Stack” and then click “Delete Stack”.</description></item></channel></rss>