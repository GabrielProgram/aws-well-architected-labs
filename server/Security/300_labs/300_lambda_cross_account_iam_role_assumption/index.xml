<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Level 300: Lambda Cross Account IAM Role Assumption on AWS Well-Architected Labs</title><link>https://wellarchitectedlabs.com/security/300_labs/300_lambda_cross_account_iam_role_assumption/</link><description>Recent content in Level 300: Lambda Cross Account IAM Role Assumption on AWS Well-Architected Labs</description><generator>Hugo -- gohugo.io</generator><lastBuildDate>Fri, 24 Apr 2020 11:16:08 -0400</lastBuildDate><atom:link href="https://wellarchitectedlabs.com/security/300_labs/300_lambda_cross_account_iam_role_assumption/index.xml" rel="self" type="application/rss+xml"/><item><title>Create role for Lambda in account 2</title><link>https://wellarchitectedlabs.com/security/300_labs/300_lambda_cross_account_iam_role_assumption/1_create_role_acct_2/</link><pubDate>Fri, 24 Apr 2020 11:16:09 -0400</pubDate><guid>https://wellarchitectedlabs.com/security/300_labs/300_lambda_cross_account_iam_role_assumption/1_create_role_acct_2/</guid><description>Sign in to the AWS Management Console as an IAM user or role in your AWS account, and open the IAM console at https://console.aws.amazon.com/iam/ .
Click Roles on the left, then create role.
Click Another AWS account, enter the account id for account 1 (the origin), then click Next: Permissions.
Do not select any managed policies, click Next: Tags.
Click Next: Review.
Enter LambdaS3ListBuckets for the Role name then click Create role.</description></item><item><title>Create role for Lambda in account 1</title><link>https://wellarchitectedlabs.com/security/300_labs/300_lambda_cross_account_iam_role_assumption/2_create_role_acct_1/</link><pubDate>Fri, 24 Apr 2020 11:16:09 -0400</pubDate><guid>https://wellarchitectedlabs.com/security/300_labs/300_lambda_cross_account_iam_role_assumption/2_create_role_acct_1/</guid><description>Sign in to the AWS Management Console as an IAM user or role in your AWS account, and open the IAM console at https://console.aws.amazon.com/iam/ .
Click Roles on the left, then create role.
AWS service will be pre-selected, select Lambda, then click Next: Permissions.
Do not select any managed policies, click Next: Tags.
Click Next: Review.
Enter Lambda-Assume-Roles for the Role name then click Create role.
From the list of roles click the name of Lambda-Assume-Roles.</description></item><item><title>Create Lambda in account 1</title><link>https://wellarchitectedlabs.com/security/300_labs/300_lambda_cross_account_iam_role_assumption/3_create_lambda_acct_1/</link><pubDate>Fri, 24 Apr 2020 11:16:09 -0400</pubDate><guid>https://wellarchitectedlabs.com/security/300_labs/300_lambda_cross_account_iam_role_assumption/3_create_lambda_acct_1/</guid><description>Open the Lambda console.
Click Create a function.
Accept the default Author from scratch.
Enter function name as Lambda-Assume-Roles.
Select Python 3.6 runtime.
Expand Permissions, click Use an existing role, then select the Lambda-Assume-Roles role.
Click Create function.
Replace the example function code with the following, replacing the RoleArn with the one from account 2 you created previously.
import json import boto3 import os import uuid def lambda_handler(event, context): try: client = boto3.</description></item><item><title>Tear down</title><link>https://wellarchitectedlabs.com/security/300_labs/300_lambda_cross_account_iam_role_assumption/4_cleanup/</link><pubDate>Fri, 24 Apr 2020 11:16:09 -0400</pubDate><guid>https://wellarchitectedlabs.com/security/300_labs/300_lambda_cross_account_iam_role_assumption/4_cleanup/</guid><description>Remove the lambda function, then roles.</description></item></channel></rss>