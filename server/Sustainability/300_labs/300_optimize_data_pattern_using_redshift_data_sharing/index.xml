<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Level 300: Optimize Data Pattern using Amazon Redshift Data Sharing on AWS Well-Architected Labs</title><link>https://wellarchitectedlabs.com/sustainability/300_labs/300_optimize_data_pattern_using_redshift_data_sharing/</link><description>Recent content in Level 300: Optimize Data Pattern using Amazon Redshift Data Sharing on AWS Well-Architected Labs</description><generator>Hugo -- gohugo.io</generator><lastBuildDate>Wed, 18 Nov 2020 09:00:08 -0400</lastBuildDate><atom:link href="https://wellarchitectedlabs.com/sustainability/300_labs/300_optimize_data_pattern_using_redshift_data_sharing/index.xml" rel="self" type="application/rss+xml"/><item><title>Understand Amazon Redshift Data Sharing</title><link>https://wellarchitectedlabs.com/sustainability/300_labs/300_optimize_data_pattern_using_redshift_data_sharing/1_understand_data_sharing/</link><pubDate>Wed, 18 Nov 2020 09:16:09 -0400</pubDate><guid>https://wellarchitectedlabs.com/sustainability/300_labs/300_optimize_data_pattern_using_redshift_data_sharing/1_understand_data_sharing/</guid><description>Lab 1 Let’s first understand some data sharing terms &amp;amp; concepts - for details, refer to the Amazon Redshift User Guide :
A datashare is the unit of sharing data in Amazon Redshift. Use datashares to share data in the same AWS account or different AWS accounts.
Data producers (also known as data sharing producers or datashare producers) are clusters that you want to share data from.
Data consumers (also known as data sharing consumers or datashare consumers) are clusters that receive datashares from producer clusters.</description></item><item><title>Prepare Amazon Redshift Producer Cluster</title><link>https://wellarchitectedlabs.com/sustainability/300_labs/300_optimize_data_pattern_using_redshift_data_sharing/2_prepare_redshift_producer_cluster/</link><pubDate>Wed, 18 Nov 2020 09:16:09 -0400</pubDate><guid>https://wellarchitectedlabs.com/sustainability/300_labs/300_optimize_data_pattern_using_redshift_data_sharing/2_prepare_redshift_producer_cluster/</guid><description>Lab 2 We will first create the producer Amazon Redshift cluster (we will refer this as the producer cluster throughout the lab) in us-east-1 region, and will also load sample dataset which we will use for our sustainability use case.
Step-1: Create Redshift Producer Cluster Login into the AWS Console (make sure us-east-1 region is selected in top right corner), and click Create Cluster.
Provide Cluster name as redshift-cluster-east, and select ra3.</description></item><item><title>Prepare Amazon Redshift Consumer Cluster</title><link>https://wellarchitectedlabs.com/sustainability/300_labs/300_optimize_data_pattern_using_redshift_data_sharing/3_prepare_redshift_consumer_cluster/</link><pubDate>Wed, 18 Nov 2020 09:16:09 -0400</pubDate><guid>https://wellarchitectedlabs.com/sustainability/300_labs/300_optimize_data_pattern_using_redshift_data_sharing/3_prepare_redshift_consumer_cluster/</guid><description>Lab 3 Now, let’s create the consumer Amazon Redshift cluster (we will refer this as consumer cluster throughout the lab) in us-west-1 region, and remember, we will not load the sample dataset in this cluster.
Step-1: Create Redshift Consumer Cluster Login into AWS Console (make sure us-west-1 region is selected in top right corner), and click Create Cluster.
Provide Cluster name as redshift-cluster-west, and select ra3.xlplus node type.
NOTE: If you get access error launching cluster with ra3.</description></item><item><title>Baseline Sustainability KPI</title><link>https://wellarchitectedlabs.com/sustainability/300_labs/300_optimize_data_pattern_using_redshift_data_sharing/4_baseline_sustainability_kpi/</link><pubDate>Wed, 18 Nov 2020 09:16:09 -0400</pubDate><guid>https://wellarchitectedlabs.com/sustainability/300_labs/300_optimize_data_pattern_using_redshift_data_sharing/4_baseline_sustainability_kpi/</guid><description>Lab 4 Recall, our sustainability improvement goal is:
To eliminate waste, low utilization, and idle or unused resources. To maximize the value from resources you consume. Let’s baseline the metrics which we can use to measure sustainability improvement once workload optimization is completed - in this case, AWS resources provisioned (storage, network traffic) to support the business outcome (number of events).
Connect to producer cluster (dev database, public schema) in us-east-1 region, and follow below steps.</description></item><item><title>Enable Amazon Redshift Data Sharing</title><link>https://wellarchitectedlabs.com/sustainability/300_labs/300_optimize_data_pattern_using_redshift_data_sharing/5_enable_data_sharing/</link><pubDate>Wed, 18 Nov 2020 09:16:09 -0400</pubDate><guid>https://wellarchitectedlabs.com/sustainability/300_labs/300_optimize_data_pattern_using_redshift_data_sharing/5_enable_data_sharing/</guid><description>Lab 5 The producer cluster administrator, who wants to share data, first sets up the producer cluster for data sharing by running the below commands in the query editor:
Step-1: Create a datashare on the producer cluster Make sure you are connected to the producer cluster as Admin in us-east-1 region. Then go to query editor to run below command:
CREATE DATASHARE MarketingShare; Step-2: Add database objects to the datashare The producer cluster administrator then adds the needed database objects.</description></item><item><title>Amazon Redshift Consumer Cluster Validation</title><link>https://wellarchitectedlabs.com/sustainability/300_labs/300_optimize_data_pattern_using_redshift_data_sharing/6_consumer_validation/</link><pubDate>Wed, 18 Nov 2020 09:16:09 -0400</pubDate><guid>https://wellarchitectedlabs.com/sustainability/300_labs/300_optimize_data_pattern_using_redshift_data_sharing/6_consumer_validation/</guid><description>Lab 6 Now, let&amp;rsquo;s validate consumer cluster access to the producer cluster datashare and objects. And then run queries from the consumer cluster against objects stored in producer cluster.
Connect to the consumer cluster in us-west-1 to perform below steps:
Step-1: Validate datashare is accessible Run below query to find the datashare type SELECT * FROM svv_datashares; You can see MarketingShare is an INBOUND type data share type.
Run below query to list objects and type SELECT * FROM svv_datashare_objects; You can see a list of objects and types (schema, table etc.</description></item><item><title>Review Sustainability KPI Optimization</title><link>https://wellarchitectedlabs.com/sustainability/300_labs/300_optimize_data_pattern_using_redshift_data_sharing/7_review_sustainability_kpi_optimization/</link><pubDate>Wed, 18 Nov 2020 09:16:09 -0400</pubDate><guid>https://wellarchitectedlabs.com/sustainability/300_labs/300_optimize_data_pattern_using_redshift_data_sharing/7_review_sustainability_kpi_optimization/</guid><description>Lab 7 With optimization completed in the previous lab, let’s follow below steps on the consumer cluster to measure the improvement on our sustainability KPI:
Connect to the consumer cluster in us-west-1 region, and click/expand on “consumer_marketing”. You can see in the tool tip that it is a datashare which is connected to a producer cluster. All the tables listed below are from producer cluster. Now, let check if the consumer cluster is storing any tables locally in the database by running below query: SELECT SUM(size) FROM SVV_TABLE_INFO WHERE &amp;#34;table&amp;#34; NOT LIKE &amp;#39;%auto%&amp;#39;; The above query did not return any table size, which means that the consumer database does not have any tables locally, hence not consuming any data storage to store the tables.</description></item><item><title>Cleanup</title><link>https://wellarchitectedlabs.com/sustainability/300_labs/300_optimize_data_pattern_using_redshift_data_sharing/cleanup/</link><pubDate>Wed, 18 Nov 2020 09:16:09 -0400</pubDate><guid>https://wellarchitectedlabs.com/sustainability/300_labs/300_optimize_data_pattern_using_redshift_data_sharing/cleanup/</guid><description>To avoid incurring further costs for AWS resources, let’s delete the Amazon Redshift clusters in both regions. Login to AWS console, and go to the Amazon Redshift service . Then follow the below steps in each region to delete producer (us-east-1 region) and consumer (us-west-1 region) clusters:
Select the cluster in respective region, and select Delete from Actions menu: To confirm deletion, type in “delete” in the field at the bottom (make sure, you do not check Create final snapshot button as it will incur cost for the storage of the snapshot), and click Delete cluster.</description></item></channel></rss>