---
title: "Getting to know Amazon CloudWatch"
date: 2020-04-24T11:16:09-04:00
chapter: false
weight: 1
pre: "<b>1. </b>"
---

#### Introduction to Right Sizing

Right sizing is the process of matching instance types and sizes to your workload performance and capacity requirements at the lowest possible cost. It’s also the process of looking at deployed instances and identifying opportunities to eliminate or downsize without compromising capacity or other requirements, which results in lower costs.

**Right sizing is an ongoing process** and it's the most effective way to control cloud costs. It involves continually analyzing instance performance and usage needs and patterns—and then turning off idle instances and right sizing instances that are either overprovisioned or poorly matched to the workload. Because your resource needs are always changing, right sizing must become an ongoing process to continually achieve cost optimization. You can make right sizing a smooth process by establishing a right-sizing schedule for each team, enforcing tagging for all instances, and taking full advantage of the powerful tools that AWS and others provide to simplify resource monitoring and analysis.

#### Right Sizing for EC2 instances and Amazon CloudWatch

Amazon EC2 provides [a wide selection of instance types optimized to fit different use cases](https://aws.amazon.com/ec2/instance-types/). Instance types comprise varying combinations of CPU, memory, storage, and networking capacity and give you the flexibility to choose the appropriate mix of resources for your applications. Each instance type includes one or more instance sizes, allowing you to scale your resources to the requirements of your target workload. 

The first step to perform right sizing on EC2 is to monitor your current use and gain insight into instance performance and usage patterns. To gather sufficient data, **observe performance over at least a two-week period (ideally, over a one-month period)** to capture the workload and business peaks. The most common metrics that define instance performance are: vCPU utilization, memory utilization, network utilization, and disk use.

**Amazon CloudWatch** is a native monitoring service for AWS cloud resources and applications that run on AWS. You can use Amazon CloudWatch to collect and track metrics, collect and monitor log files, and set alarms. In addition to Amazon EC2, Amazon CloudWatch can also monitor AWS resources such as Amazon DynamoDB tables, and Amazon RDS DB instances, as well as custom metrics generated by your applications and services, and any log files your applications generate. 

You can [check here a complete list the available CloudWatch metrics for your EC2 instances](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/viewing_metrics_with_cloudwatch.html) including `CPUUtilization`, `NetworkIn` and `NetworkOut`. By default, each data point covers the 5 minutes that follow the start time of activity for the instance. If you have enabled detailed monitoring, each data point covers the next minute of activity from the start time.

> Amazon CloudWatch detail monioring may result in additional charges on your account. Please [check the Amazon CloudWatch free tier](https://aws.amazon.com/cloudwatch/pricing/) for more details.

**Amazon CloudWatch doesn't collect Amazon EC2 instance memory utilization by default**. In order to monitor memory consumption you will need to install a **CloudWatch Agent** to collect system-level metrics across operating systems. We will cover this step in details on the [200 LVL EC2 Right Sizing lab]({{< ref "/Cost/200_Labs/200_AWS_Resource_Optimization" >}}).

#### Getting to know Amazon CloudWatch

> **NOTE:** In order to complete the steps below you will need to have at least one Amazon EC2 instance running in your account.

1. Log into your AWS console via SSO, go to the **Amazon CloudWatch** service page:
![Images/CloudWatch01.png](/Cost/100_AWS_Resource_Optimization/Images/CloudWatch01.png)

2. Select **EC2** under the **Service Dashboard**:
![Images/CloudWatch02.png](/Cost/100_AWS_Resource_Optimization/Images/CloudWatch02.png)

3. Observe the **Service Dashboard** and all of its different metrics, but focus on **CPU Utilization** and **Network In Average** and **Network Out Average**:
![Images/CloudWatch03.png](/Cost/100_AWS_Resource_Optimization/Images/CloudWatch03.png)

4. Select one of the **EC2** resources by clicking either on the chart line or on the icons to the left of the **resource-id** name:
![Images/CloudWatch04.png](/Cost/100_AWS_Resource_Optimization/Images/CloudWatch04.png)

5. Deselect the **EC2 resource** and now modify the time range on the top right, click **custom** and select the **last 2 weeks**:
![Images/CloudWatch05.png](/Cost/100_AWS_Resource_Optimization/Images/CloudWatch05.png)

6. Navigate to the **CPU Utilization Average** widget, click the **three dots** and launch the **View in metrics** page. Using the **Graphed metrics** section try to answer the following questions:

- a. What is the instance with the highest CPU Average?
- b. What is the instance with the highest CPU Max?
- c. What is the instance with the lowest CPU Min?

![Images/CloudWatch05.png](/Cost/100_AWS_Resource_Optimization/Images/CloudWatch06.png)
![Images/CloudWatch05.png](/Cost/100_AWS_Resource_Optimization/Images/CloudWatch07.png)

#### Resources
- [Amazon CloudWatch](https://aws.amazon.com/cloudwatch/)
- [Amazon CloudWatch pricing](https://aws.amazon.com/cloudwatch/pricing/)
- [Amazon CloudWatch FAQ](https://aws.amazon.com/cloudwatch/faqs/)
- [AWS Cost Management - Right Sizing](https://aws.amazon.com/aws-cost-management/aws-cost-optimization/right-sizing/)
- [List of available CloudWatch metrics for EC2 instances](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/viewing_metrics_with_cloudwatch.html)
- [WA Lab LVL 200 EC2 Right Sizing with Computer Optimizer]({{< ref "/Cost/200_Labs/200_AWS_Resource_Optimization" >}})

{{< prev_next_button link_prev_url="../" link_next_url="../2_resource_opt/" />}}